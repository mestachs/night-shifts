(this["webpackJsonpnight-shifts"]=this["webpackJsonpnight-shifts"]||[]).push([[0],{363:function(e,n,t){e.exports=t(516)},368:function(e,n,t){},388:function(e,n,t){},395:function(e,n){},397:function(e,n){},446:function(e,n){},471:function(e,n){},472:function(e,n){},516:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(12),i=t.n(o),c=(t(368),t(202)),l=t(198),u=t.n(l),s=t(21),d=t.n(s),f=(t(388),t(352)),p=t(355),m=t(73),h=t(542),g=t(354),v=t.n(g),b=t(273),w=t(192),E=t(140),y=t(199),x=t.n(y);x.a.openAsBlob=function(e,n){e.outputAsync({type:"blob"}).then((function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,n||"out.xlsx");else{var t=window.URL.createObjectURL(e),a=document.createElement("a");document.body.appendChild(a),a.href=t,a.download=n||"out.xlsx",a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}}))};var S=x.a,O=t(195);var L=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,"Upload your xslx file. (not data transfered to any server)"),r.a.createElement("input",{type:"file",name:"Xlsx",onChange:function(n){var t=n.target.files||[];if(t.length){var a=t[0];S.fromDataAsync(a).then((function(n){var t=["jour","date","gpicnic","rnic","rsip","tnic","tsip"],a=n.sheets(),r=[],o=new Set;a.forEach((function(e){e.range("A2:G36").value().filter((function(e){return null!==e[0]&&""!==e[0]&&void 0!==e[0]})).forEach((function(n){var a={};n.forEach((function(e,n){e&&e.includes&&e.includes("----")&&(e=void 0),"date"==t[n]&&(e=S.numberToDate(e)),["gpicnic","rnic","rsip","tnic","tsip"].includes(t[n])&&o.add(e),a[t[n]]=e})),a.month=e.name(),r.push(a)}))}));var i=Array.from(o).sort(),c=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],l=[];["gpicnic","rnic","rsip","tnic","tsip","ALL"].forEach((function(e){i.forEach((function(n){var t=r.filter((function(t){return"ALL"==e?JSON.stringify(t).includes(n):t[e]&&t[e].includes(n)})),a=d.a.countBy(t,(function(e){return e.jour})),o={role:e};o.doctor=n;var i=0;c.forEach((function(e){o[e]=a[e],a[e]&&(i+=a[e])})),o.total=i,l.push(o)}))}));var u=l.filter((function(e){return 0!==e.total}));e.onChange({watches:r,stats:u})}))}},accept:".xlsx",helperText:"Your xlsx file"}),r.a.createElement("p",null))},C=t(278),j=Object(E.a)((function(e){return{root:{width:"70%",margin:"auto",backgroundColor:"#eeeeee",height:"100%"},paper:{paddingBottom:"100%",paddingLeft:"100px",backgroundColor:"#eeeeee"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}})),B=function(e){return e.map((function(e,n){return{id:"row-"+n,label:e.role+" "+e.doctor,points:[{x:1,y:e.Lundi||0,label:"Lundi"},{x:2,y:e.Mardi||0,label:"Mardi"},{x:3,y:e.Mercredi||0,label:"Me"},{x:4,y:e.Jeudi||0,label:"Je"},{x:5,y:e.Vendredi||0,label:"Ve"},{x:6,y:e.Samedi||0,label:"Sa"},{x:7,y:e.Dimanche||0,label:"Di"}]}}))};var M=function(){var e=j(),n=Object(a.useState)(void 0),t=Object(c.a)(n,2),o=t[0],i=t[1],l=Object(a.useState)("SMEE"),s=Object(c.a)(l,2),g=s[0],E=s[1],y=d.a.debounce(E,250,{maxWait:1e3});return r.a.createElement(p.a,null,r.a.createElement("div",{className:e.root},r.a.createElement(h.a,{position:"static",color:"primary"},r.a.createElement(b.a,null,r.a.createElement(w.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",href:"#/recipes/"},r.a.createElement(v.a,null)),r.a.createElement(m.a,{variant:"h6",color:"inherit"},"Evaluate your night shift planning."))),r.a.createElement(C.a,{onChange:function(e){var n=e.target.value;y(n)}}),void 0==o&&r.a.createElement(L,{onChange:i}),o&&r.a.createElement(f.PunchCard,{value:B(o.stats).filter((function(e){return e.label.includes(g)})),renderAxisTick:function(e){return r.a.createElement("span",null,e.label)}}),o&&r.a.createElement(u.a,{title:"Stats per role & doctor",options:{rowsPerPage:30,rowsPerPageOptions:[30,300,1e3],filterType:"dropdown",print:!1,selectableRows:"none"},data:o.stats.filter((function(e){return e.doctor.includes(g)||e.role.includes(g)})),columns:["role","doctor","Lundi","Mardi","Mercredi","Vendredi","Samedi","Dimanche","total"].map((function(e){return{name:e,options:{filter:!0,customBodyRender:function(e){return e?e.toString():""}}}}))}),o&&r.a.createElement(u.a,{title:"Scheduled night shifts",options:{rowsPerPage:30,rowsPerPageOptions:[20,300,1e3],filterType:"dropdown",print:!1,selectableRows:"none"},data:o.watches.filter((function(e){return JSON.stringify(e).includes(g)})),columns:["jour","date","gpicnic","rnic","rsip","tnic","tsip","month"].map((function(e){return{name:e,options:{filter:!0,customBodyRender:function(e){return e?e instanceof Date?e.getUTCDate().toString().padStart(2,"0")+"/"+(e.getUTCMonth()+1).toString().padStart(2,"0"):e:""}}}}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[363,1,2]]]);
//# sourceMappingURL=main.977268d1.chunk.js.map